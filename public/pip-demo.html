<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calo é†¬ - Picture-in-Picture æ¸¬è©¦é é¢</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            overflow: hidden;
        }

        .container {
            max-width: 1200px;
            width: 100%;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .header h1 {
            font-size: 3rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.2rem;
            opacity: 0.9;
        }

        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .card {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .card h2 {
            color: #667eea;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }

        .card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .feature {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            color: white;
            text-align: center;
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }

        .feature h3 {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .feature p {
            font-size: 0.9rem;
            opacity: 0.9;
            color: white;
        }

        .info-box {
            background: #f0f9ff;
            border-left: 4px solid #667eea;
            padding: 15px;
            margin-top: 20px;
            border-radius: 8px;
        }

        .info-box strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }

        /* PiP æµ®å‹•è¦–çª— */
        .pip-window {
            position: fixed;
            width: 300px;
            height: 500px;
            background: white;
            border-radius: 12px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.4);
            z-index: 9999;
            overflow: hidden;
            display: none;
            transition: box-shadow 0.3s ease;
        }

        .pip-window.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        .pip-window.dragging {
            box-shadow: 0 30px 80px rgba(0,0,0,0.5);
            cursor: move;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: scale(0.9);
            }
            to {
                opacity: 1;
                transform: scale(1);
            }
        }

        .pip-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 10px 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            user-select: none;
        }

        .pip-title {
            color: white;
            font-weight: 600;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .pip-controls {
            display: flex;
            gap: 8px;
        }

        .pip-btn {
            width: 24px;
            height: 24px;
            border-radius: 50%;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 12px;
            transition: all 0.2s ease;
        }

        .pip-btn:hover {
            transform: scale(1.1);
        }

        .pip-btn.minimize {
            background: #fbbf24;
        }

        .pip-btn.close {
            background: #ef4444;
            color: white;
        }

        .pip-content {
            width: 100%;
            height: calc(100% - 44px);
        }

        .pip-content iframe {
            width: 100%;
            height: 100%;
            border: none;
        }

        /* æ§åˆ¶æŒ‰éˆ• */
        .controls {
            position: fixed;
            bottom: 30px;
            right: 30px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            z-index: 10000;
        }

        .fab {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: none;
            background: #22c55e;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 8px 24px rgba(34, 197, 94, 0.4);
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 32px rgba(34, 197, 94, 0.5);
        }

        .fab.primary {
            background: #667eea;
            box-shadow: 0 8px 24px rgba(102, 126, 234, 0.4);
        }

        .fab.primary:hover {
            box-shadow: 0 12px 32px rgba(102, 126, 234, 0.5);
        }

        .fab-label {
            position: absolute;
            right: 70px;
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            font-size: 0.85rem;
            white-space: nowrap;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
        }

        .fab:hover .fab-label {
            opacity: 1;
        }

        .instruction {
            background: rgba(255, 255, 255, 0.95);
            padding: 20px;
            border-radius: 12px;
            margin-top: 20px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .instruction h3 {
            color: #667eea;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .instruction ol {
            color: #666;
            line-height: 2;
            margin-left: 20px;
        }

        .instruction li {
            margin-bottom: 8px;
        }

        @media (max-width: 768px) {
            .content {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 2rem;
            }

            .pip-window {
                width: 250px;
                height: 416px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸ¶ Calo é†¬ Picture-in-Picture å±•ç¤º</h1>
            <p>å¯æ‹–æ›³çš„æµ®å‹•è¦–çª—é«”é©—</p>
        </div>

        <div class="content">
            <div class="card">
                <h2>ğŸ“± é—œæ–¼ Picture-in-Picture</h2>
                <p>
                    Picture-in-Picture (PiP) æ˜¯ä¸€ç¨®å¯ä»¥å°‡å…§å®¹æµ®å‹•åœ¨å…¶ä»–é é¢ä¸Šçš„æŠ€è¡“ï¼Œ
                    è®“ä½¿ç”¨è€…å¯ä»¥åœ¨ç€è¦½ä¸»è¦å…§å®¹çš„åŒæ™‚ï¼Œæ“ä½œå…¶ä»–åŠŸèƒ½ã€‚
                </p>
                <p>
                    <strong>Calo é†¬</strong> è¨­è¨ˆç‚º 300x500 åƒç´ çš„æµ®å‹•è¦–çª—ï¼Œ
                    å®Œç¾é©é…å„ç¨®ä½¿ç”¨å ´æ™¯ï¼š
                </p>
                <ul style="color: #666; line-height: 2; margin-left: 20px;">
                    <li>ğŸ“± Line Bot èŠå¤©è¦–çª—</li>
                    <li>ğŸ’¬ Messenger Bot</li>
                    <li>ğŸ”” Slack æ‡‰ç”¨ç¨‹å¼</li>
                    <li>ğŸ‘¥ Teams æ•´åˆ</li>
                    <li>ğŸŒ ç¶²é å´é‚Šæ¬„</li>
                </ul>

                <div class="instruction">
                    <h3>ğŸ® æ“ä½œæŒ‡å—</h3>
                    <ol>
                        <li><strong>é–‹å•Ÿ PiP</strong>ï¼šé»æ“Šå³ä¸‹è§’ç¶ è‰²æŒ‰éˆ• ğŸ¶</li>
                        <li><strong>æ‹–æ›³ç§»å‹•</strong>ï¼šé»ä½æ¨™é¡Œæ¬„æ‹–æ›³è¦–çª—ä½ç½®</li>
                        <li><strong>æœ€å°åŒ–</strong>ï¼šé»æ“Šé»ƒè‰²æŒ‰éˆ•ç¸®å°è¦–çª—</li>
                        <li><strong>é—œé–‰</strong>ï¼šé»æ“Šç´…è‰² Ã— æŒ‰éˆ•é—œé–‰è¦–çª—</li>
                        <li><strong>ä½¿ç”¨åŠŸèƒ½</strong>ï¼šåœ¨æµ®å‹•è¦–çª—ä¸­æ­£å¸¸æ“ä½œ</li>
                    </ol>
                </div>
            </div>

            <div class="card">
                <h2>âœ¨ ä¸»è¦åŠŸèƒ½</h2>
                <p><strong>ğŸ± é£Ÿç‰©è¨˜éŒ„</strong></p>
                <p>å¿«é€Ÿè¼¸å…¥é£Ÿç‰©åç¨±ã€ç†±é‡èˆ‡å‚™è¨»è³‡è¨Š</p>
                
                <p><strong>ğŸ“Š å³æ™‚é¡¯ç¤º</strong></p>
                <p>è‡ªå‹•ä¾æ™‚é–“æ’åºï¼Œæœ€æ–°è¨˜éŒ„åœ¨æœ€ä¸Šæ–¹</p>
                
                <p><strong>âœ… è¼¸å…¥é©—è­‰</strong></p>
                <p>æ™ºæ…§é©—è­‰ç¢ºä¿è³‡æ–™æ­£ç¢ºæ€§ï¼ˆ0-9999 å¤§å¡ï¼‰</p>
                
                <p><strong>ğŸ¨ ç¾ä»£è¨­è¨ˆ</strong></p>
                <p>ä½¿ç”¨ shadcn/ui å…ƒä»¶åº«ï¼Œä»‹é¢æ¸…æ–°å¥åº·</p>

                <div class="info-box">
                    <strong>ğŸ”— API æ•´åˆ</strong>
                    å¾Œç«¯æœå‹™ï¼š<code>http://127.0.0.1:5001</code><br>
                    å‰ç«¯æœå‹™ï¼š<code>http://localhost:3000</code>
                </div>

                <p style="margin-top: 20px; padding: 15px; background: #fef3c7; border-radius: 8px; color: #92400e;">
                    <strong>ğŸ’¡ æç¤ºï¼š</strong>é»æ“Šå³ä¸‹è§’çš„æµ®å‹•æŒ‰éˆ•é–‹å•Ÿ PiP è¦–çª—ï¼
                </p>
            </div>
        </div>

        <div class="features">
            <div class="feature">
                <div class="feature-icon">ğŸ–±ï¸</div>
                <h3>å¯æ‹–æ›³ç§»å‹•</h3>
                <p>è‡ªç”±æ‹–æ›³åˆ°ä»»æ„ä½ç½®</p>
            </div>
            <div class="feature">
                <div class="feature-icon">ğŸ¯</div>
                <h3>ç²¾æº–å°ºå¯¸</h3>
                <p>300x500px å®Œç¾é©é…</p>
            </div>
            <div class="feature">
                <div class="feature-icon">âš¡</div>
                <h3>å³æ™‚äº’å‹•</h3>
                <p>æµ®å‹•è¦–çª—å®Œæ•´åŠŸèƒ½</p>
            </div>
            <div class="feature">
                <div class="feature-icon">ğŸ¨</div>
                <h3>ç¾è§€è¨­è¨ˆ</h3>
                <p>ç¾ä»£åŒ–è¦–è¦ºæ•ˆæœ</p>
            </div>
        </div>
    </div>

    <!-- PiP æµ®å‹•è¦–çª— -->
    <div class="pip-window" id="pipWindow">
        <div class="pip-header" id="pipHeader">
            <div class="pip-title">
                <span>ğŸ¶</span>
                <span>Calo é†¬</span>
            </div>
            <div class="pip-controls">
                <button class="pip-btn minimize" onclick="minimizePip()" title="æœ€å°åŒ–">âˆ’</button>
                <button class="pip-btn close" onclick="closePip()" title="é—œé–‰">Ã—</button>
            </div>
        </div>
        <div class="pip-content">
            <iframe src="http://localhost:3000" title="Calo é†¬ - é£Ÿç‰©ç†±é‡è¨˜éŒ„"></iframe>
        </div>
    </div>

    <!-- æµ®å‹•æ§åˆ¶æŒ‰éˆ• -->
    <div class="controls">
        <button class="fab primary" onclick="openPip()" id="openBtn">
            ğŸ¶
            <span class="fab-label">é–‹å•Ÿ Calo é†¬</span>
        </button>
        <button class="fab" onclick="location.reload()">
            ğŸ”„
            <span class="fab-label">é‡æ–°è¼‰å…¥</span>
        </button>
    </div>

    <script>
        let isDragging = false;
        let currentX;
        let currentY;
        let initialX;
        let initialY;
        let xOffset = 0;
        let yOffset = 0;

        const pipWindow = document.getElementById('pipWindow');
        const pipHeader = document.getElementById('pipHeader');
        const openBtn = document.getElementById('openBtn');

        // é–‹å•Ÿ PiP
        function openPip() {
            pipWindow.classList.add('active');
            openBtn.style.display = 'none';
            
            // é è¨­ä½ç½®ï¼šå³ä¸‹è§’
            const windowWidth = window.innerWidth;
            const windowHeight = window.innerHeight;
            const x = windowWidth - 330;
            const y = windowHeight - 530;
            
            pipWindow.style.left = x + 'px';
            pipWindow.style.top = y + 'px';
            
            xOffset = x;
            yOffset = y;
        }

        // é—œé–‰ PiP
        function closePip() {
            pipWindow.classList.remove('active');
            openBtn.style.display = 'flex';
        }

        // æœ€å°åŒ– PiP
        function minimizePip() {
            pipWindow.style.height = '44px';
            setTimeout(() => {
                pipWindow.style.height = '500px';
            }, 300);
        }

        // æ‹–æ›³é–‹å§‹
        pipHeader.addEventListener('mousedown', dragStart);
        pipHeader.addEventListener('touchstart', dragStart);

        function dragStart(e) {
            if (e.type === 'touchstart') {
                initialX = e.touches[0].clientX - xOffset;
                initialY = e.touches[0].clientY - yOffset;
            } else {
                initialX = e.clientX - xOffset;
                initialY = e.clientY - yOffset;
            }

            if (e.target === pipHeader || pipHeader.contains(e.target)) {
                isDragging = true;
                pipWindow.classList.add('dragging');
            }
        }

        // æ‹–æ›³ä¸­
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag);

        function drag(e) {
            if (isDragging) {
                e.preventDefault();

                if (e.type === 'touchmove') {
                    currentX = e.touches[0].clientX - initialX;
                    currentY = e.touches[0].clientY - initialY;
                } else {
                    currentX = e.clientX - initialX;
                    currentY = e.clientY - initialY;
                }

                xOffset = currentX;
                yOffset = currentY;

                // é™åˆ¶è¦–çª—ä¸è¶…å‡ºé‚Šç•Œ
                const maxX = window.innerWidth - 300;
                const maxY = window.innerHeight - 500;
                
                xOffset = Math.max(0, Math.min(xOffset, maxX));
                yOffset = Math.max(0, Math.min(yOffset, maxY));

                setTranslate(xOffset, yOffset, pipWindow);
            }
        }

        // æ‹–æ›³çµæŸ
        document.addEventListener('mouseup', dragEnd);
        document.addEventListener('touchend', dragEnd);

        function dragEnd() {
            initialX = currentX;
            initialY = currentY;
            isDragging = false;
            pipWindow.classList.remove('dragging');
        }

        function setTranslate(xPos, yPos, el) {
            el.style.left = xPos + 'px';
            el.style.top = yPos + 'px';
        }

        // è¦–çª—å¤§å°æ”¹è®Šæ™‚èª¿æ•´ä½ç½®
        window.addEventListener('resize', () => {
            if (pipWindow.classList.contains('active')) {
                const maxX = window.innerWidth - 300;
                const maxY = window.innerHeight - 500;
                
                xOffset = Math.max(0, Math.min(xOffset, maxX));
                yOffset = Math.max(0, Math.min(yOffset, maxY));
                
                setTranslate(xOffset, yOffset, pipWindow);
            }
        });
    </script>
</body>
</html>
